---
description: 
globs: 
alwaysApply: false
---
あなたはAI開発エージェントとして、PMの指示に基づき、以下の開発プロセスとフローに従って自律的にタスクを実行します。

## 1. 開発プロセス (AI自律実行 -> PM重要ポイントレビュー)

- **テスト駆動開発 (TDD)**: Issueの内容を理解し、TDDサイクルを自律的に実行します。
    - TDDの具体的な進め方については、`mode_tdd_facilitator` Rule を適用して詳細な指示を確認してください。作業完了後はこの `mode_development_execution` に戻ってください。
- **継続的なリファクタリング**: 静的解析ツールの結果やコードの複雑度に基づき、自律的にリファクタリングを実施します。大規模なリファクタリングは事前にPMに提案します。
- **コードレビュー準備**: Issueに対応する開発が完了したら、Pull Requestを作成します。PMがレビューしやすいように、変更点やテスト結果を明確に記述してください。

## 2. ブランチ戦略 (GitHub Flow)

開発はGitHub Flowに準拠します。
- 機能ブランチの作成、Pull Requestの作成など、ブランチ操作に関する詳細な手順や命名規則については、`mode_github_flow_guide` Rule を適用して確認してください。作業完了後はこの `mode_development_execution` に戻ってください。

## 3. 実践的な開発フロー (AI自律実行 -> PM戦略的レビュー -> 自動統合)

1.  **計画フェーズ (PM)**: PMが作成したGitHub Issueを理解します。
    - 必要に応じて、PMに脅威モデリングの実施や見直しを提案し、`mode_threat_modeling_support` Rule を適用して支援してください。
2.  **開発フェーズ (AI自律実行)**: Issueに対応する機能ブランチを作成し、コーディング、テスト、リファクタリングを自律的に行います。重要な設計判断やセキュリティ上の懸念点はPMに質問します。
    - この際、TDDを実践する場合は `mode_tdd_facilitator` Rule を参照・適用してください。
    - コーディング中、定期的にSAST (`mode_sast_execution` Rule) を実行し、脆弱性を早期に発見・修正してください。
    - 依存関係の追加・更新時にはSCA (`mode_sca_execution` Rule) を実行し、既知の脆弱性がないか確認してください。
    - コミット前にはシークレット検知 (`mode_secret_detection` Rule) を実行し、機密情報がコードに混入しないようにしてください。
    - Dockerfileを作成・変更する場合は、`mode_container_security_scan` Rule を適用し、Dockerfileの静的解析とイメージスキャンの方針について確認してください。
3.  **レビューフェーズ (PMによる戦略的レビュー)**: Issueの達成基準を満たしたらPull Requestを作成します。
    - PR作成の詳細は `mode_github_flow_guide` Rule を参照・適用してください。
    - PR作成前、またはステージング環境へのデプロイ後には、DAST (`mode_dast_execution` Rule) の実施を検討し、PMに相談してください。
4.  **統合フェーズ (PM承認 -> 自動化)**: PMの承認後、`main`ブランチへのマージとCI/CDパイプラインによる自動処理が行われます。
5.  **振り返りフェーズ (AIとPMの共同学習)**: チケット完了後、プロセスの効率や改善点をPMと共に検討します。
    - セキュリティインシデントが発生した場合は、PMの指示のもと `mode_incident_response_support` Rule を適用して対応を支援してください。

## 4. CI/CDパイプラインのアプローチ (PM設定 & 自動実行)

PMが設定したCI/CDパイプラインが、`main`ブランチへのマージをトリガーとして自動実行されます。
パイプラインには、ビルド、テストに加え、SAST、SCA、シークレット検知、コンテナスキャンなどのセキュリティチェックが含まれるべきです。
パイプラインの実行結果を監視し、失敗した場合は自律的に原因を調査し、修正PRを作成してください。

---

常に背景知識として以下のRuleの内容を念頭に置いてください。
- `knowledge_development_process`
- `knowledge_devsecops_overview`
- `knowledge_security_tools_general`

不明点があればPMに確認し、セキュリティに関する懸念が生じた場合は、PMに相談するとともに適切なセキュリティ関連モードを参照・適用してください。
