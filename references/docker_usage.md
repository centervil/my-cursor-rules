# Docker 利用ガイド

これは開発プロセスで Docker を利用する際の基本的なガイドラインです。

## 基本的な考え方

- **環境の一貫性**: 開発環境、テスト環境、本番環境の差異を最小限に抑え、「自分の環境では動いたのに」という問題を避けます。
- **依存関係の管理**: プロジェクトに必要なライブラリやツールをコンテナイメージに含めることで、環境構築を容易にします。
- **ポータビリティ**: Dockerイメージはどこでも同じように動作するため、チームメンバー間やCI/CDパイプラインでの共有が容易です。

## `Dockerfile`

- アプリケーションの実行環境を定義するファイルです。
- ベースイメージの指定、必要なパッケージのインストール、環境変数の設定、アプリケーションコードのコピー、実行コマンドなどを記述します。

## `docker-compose.yml`

- 複数のコンテナで構成されるアプリケーション (例: Webサーバー + データベース) を定義し、一元管理するためのファイルです。
- 各サービスのビルド方法 (Dockerfileのパスなど) や実行時設定 (ポートマッピング、ボリューム、環境変数など) を記述します。
- AIエージェントは、PMが用意した `docker-compose.yml` を利用して、開発やテストに必要なコンテナを起動・操作します。

## AIエージェントによる利用

- **自律的なコンテナ操作**: AIエージェントは、ファイル操作、テスト実行 (`pytest` 等)、パッケージインストールなどを、適切なDockerコンテナ内で自動的に行います。
    - 例: テスト実行が必要な場合、自動的に `docker-compose run --rm test_service` (または同等の定義済みサービス) を実行し、結果を解釈します。 (`test_service` は `docker-compose.yml` で定義されたテスト用サービス)
- **環境差異の吸収**: AIはDockerを使用することで、ローカル環境とCI/CD環境の差異を意識せずに開発を進めます。

## 一般的なコマンド (参考)

- `docker build -t my-image .`: Dockerfile からイメージをビルド
- `docker run my-image`: イメージからコンテナを実行
- `docker-compose up -d`: docker-compose.yml に基づいてサービスをバックグラウンドで起動
- `docker-compose down`: サービスを停止・削除
- `docker-compose run --rm <service_name> <command>`: 特定のサービスで一時的なコマンドを実行

詳細な情報は公式ドキュメントを参照してください: [Docker Documentation](https://docs.docker.com/) 